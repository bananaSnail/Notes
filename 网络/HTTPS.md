### https
- 以安全为目标的HTTP通道，简单讲是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。
- SSL作用于应用层和传输层之间，如果硬要说在哪个位置，则是会话层
- HTTPS就是使用SSL/TLS协议进行加密传输，让客户端拿到服务器的公钥，然后客户端随机生成一个对称加密的秘钥，使用公钥加密，传输给服务端，后续的所有信息都通过该对称秘钥进行加密解密，完成整个HTTPS的流程。


### https -> http
- `HTTPS比HTTP更加安全，对搜索引擎更友好，利于SEO,谷歌、百度优先索引HTTPS网页;`
- `HTTPS需要用到SSL证书，而HTTP不用;`
- `HTTPS标准端口443，HTTP标准端口80;`
- `HTTPS基于传输层，HTTP基于应用层;`
- HTTPS在浏览器显示绿色安全锁，HTTP没有显示;

### 密码学SSL协议
- 明文： 明文指的是未被加密过的原始数据。
- 密文：明文被某种加密算法加密之后，会变成密文，从而确保原始数据的安全。密文也可以被解密，得到原始的明文。
- 密钥：密钥是一种参数，它是在明文转换为密文或将密文转换为明文的算法中输入的参数。密钥分为对称密钥与非对称密钥，分别应用在对称加密和非对称加密上。

### 对称加密
- **对称加密又叫做私钥加密，即信息的发送方和接收方使用同一个密钥去加密和解密数据。**对称加密的特点是算法公开、加密和解密速度快，适合于对大数据量进行加密，常见的对称加密算法有DES、3DES、TDEA、Blowfish、RC5和IDEA。
```
其加密过程如下：明文 + 加密算法 + 私钥 => 密文
解密过程如下：密文 + 解密算法 + 私钥 => 明文
```
- 对称加密中用到的密钥叫做私钥，私钥表示个人私有的密钥，即该密钥不能被泄露。

- 其加密过程中的私钥与解密过程中用到的私钥是同一个密钥，这也是称加密之所以称之为“对称”的原因。由于对称加密的算法是公开的，所以一旦私钥被泄露，那么密文就很容易被破解，所以对称加密的缺点是密钥安全管理困难。

### 非对称加密
- **非对称加密也叫做公钥加密。**非对称加密与对称加密相比，其安全性更好。对称加密的通信双方使用相同的密钥，如果一方的密钥遭泄露，那么整个通信就会被破解。而非对称加密使用一对密钥，即公钥和私钥，且二者成对出现。私钥被自己保存，不能对外泄露。公钥指的是公共的密钥，任何人都可以获得该密钥。用公钥或私钥中的任何一个进行加密，用另一个进行解密。

 - **被公钥加密过的密文只能被私钥解密**，过程如下：
```
明文 + 加密算法 + 公钥 => 密文， 密文 + 解密算法 + 私钥 => 明文
```

 - **被私钥加密过的密文只能被公钥解密**，过程如下：
```
明文 + 加密算法 + 私钥 => 密文， 密文 + 解密算法 + 公钥 => 明文
```

- 由于加密和解密使用了两个不同的密钥，这就是非对称加密“非对称”的原因。
- 非对称加密的缺点是加密和解密花费时间长、速度慢，只适合对少量数据进行加密。
- 在非对称加密中使用的主要算法有：RSA、Elgamal、Rabin、D-H、ECC（椭圆曲线加密算法）等。

## HTTPS通信过程

- **HTTPS协议 = HTTP协议 + SSL/TLS协议**，在HTTPS数据传输的过程中，需要用SSL/TLS对数据进行加密和解密，需要用HTTP对加密后的数据进行传输，由此可以看出HTTPS是由HTTP和SSL/TLS一起合作完成的。

- **SSL**的全称是Secure Sockets Layer，即安全套接层协议，是为网络通信提供安全及数据完整性的一种安全协议。SSL协议在1994年被Netscape发明，后来各个浏览器均支持SSL，其最新的版本是3.0。

- **TLS**的全称是Transport Layer Security，即安全传输层协议，最新版本的TLS（Transport Layer Security，传输层安全协议）是IETF（Internet Engineering Task Force，Internet工程任务组）制定的一种新的协议，它建立在SSL 3.0协议规范之上，是SSL 3.0的后续版本。在TLS与SSL3.0之间存在着显著的差别，主要是它们所支持的加密算法不同，所以TLS与SSL3.0不能互操作。虽然TLS与SSL3.0在加密算法上不同，但是在我们理解HTTPS的过程中，我们可以把SSL和TLS看做是同一个协议。

- HTTPS为了兼顾安全与效率，**同时使用了对称加密和非对称加密**。数据是被对称加密传输的，对称加密过程需要客户端的一个密钥，为了确保能把该密钥安全传输到服务器端，采用非对称加密对该密钥进行加密传输，总的来说，**对数据进行对称加密，对称加密所要使用的密钥通过非对称加密传输**。


- HTTPS在传输的过程中会涉及到三个密钥：
 - 服务器端的公钥和私钥，用来进行非对称加密
 - 客户端生成的随机密钥，用来进行对称加密
![https认证过程](./https%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B.png)
- https解决问题过程：
  - 如何防止监听
    只需对客户端以及服务端数据加密传输即可，这里就设计几种加密：不可逆加密、对称加密、非对称加密。不可逆加密无意义不考虑，对称加密需要客户端与服务端共享明文秘钥，因此依然会被监听到，不考虑。非对称加密私钥解密，公钥加密，客户端共享明文公钥，这个可行，但是由于非对称加密效率问题，这里使用非对称加密+对称加密的方式，也就是**当客户端收到公钥后自己生成对称加密的秘钥并用公钥加密后返回到服务端，后续都通过对称加密的方式通信，但是这里有遗留问题，依然可以被劫持篡改。**
  - 如果和防止篡改
    上面说的只是最终的加密方式，但是黑客可以充当客户端和服务端的角色，当服务端下发公钥时黑客劫持，并自己生成公钥、私钥，并将自己的公钥发给客户端，由于此时客户端与服务端都无法辨认对方是否是被伪装的身份，客户端会根据黑客给到的公钥生成对称秘钥，并将这些都给到服务端，此时再次被黑客劫持，他用自己的私钥解密这个对称秘钥，并通过服务端的公钥加密并给到服务端，服务端依然识别不了黑客是否是伪装的。因此**放篡改的根本是客户端与服务端数据传输时带上身份认证信息，实际就是数字证书，这个是国家下发的，里面有服务器的相关信息，以及私钥加密的一个签名，服务端给到客户端时，会有明文信息，以及加密的签名，这是客户端根据信息通过ca机构的公钥对签名验签通过即可认证服务器，此时但凡中间伪造都是可识别出的，因此双方确认身份的关键就是带上身份认证的令牌。（浏览器内部有ca机构的公钥）**
- 对称加密算法加密数据+非对称加密算法交换密钥+数字证书验证身份=安全

